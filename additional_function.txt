อันดูเเล้วเเต่อันที่เราสนใจ
const handleUndo = () => {
  if (selectedTool === 'poly' && polygons.length > 0) {
    const updated = [...polygons];
    updated.pop();
    setPolygons(updated);
    setShapesData({ ...shapesData, polygons: updated });
  } else if (selectedTool === 'line' && lines.length > 0) {
    const updated = [...lines];
    updated.pop();
    setLines(updated);
    setShapesData({ ...shapesData, lines: updated });
  } else if (selectedTool === 'rect' && rectangles.length > 0) {
    const updated = [...rectangles];
    updated.pop();
    setRectangles(updated);
    setShapesData({ ...shapesData, rectangles: updated });
  }
};

อันดูเเบบไม่สนว่าอันไหน

const handleUndo = () => {
  if (rectangles.length > 0) {
    const updated = [...rectangles];
    updated.pop();
    setRectangles(updated);
    setShapesData({ ...shapesData, rectangles: updated });
  } else if (lines.length > 0) {
    const updated = [...lines];
    updated.pop();
    setLines(updated);
    setShapesData({ ...shapesData, lines: updated });
  } else if (polygons.length > 0) {
    const updated = [...polygons];
    updated.pop();
    setPolygons(updated);
    setShapesData({ ...shapesData, polygons: updated });
  }
};

